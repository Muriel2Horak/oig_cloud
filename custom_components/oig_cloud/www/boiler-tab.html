<!-- Tab: Bojler & Auto -->
<div id="boiler-tab" class="tab-content">

    <!-- Boiler Control Panel -->
    <div class="boiler-control-panel minimized" id="boiler-control-panel">
        <div class="panel-header" onclick="toggleBoilerControlPanel()">
            <h3>üî• Ovl√°d√°n√≠ bojleru
                <span class="info-bubble" onclick="event.stopPropagation()">‚ùì
                    <span class="info-bubble-tooltip">
                        <strong>Ovl√°d√°n√≠ bojleru</strong>
                        Zde m≈Ø≈æete spravovat inteligentn√≠ pl√°nov√°n√≠ oh≈ôevu bojleru.
                        <ul>
                            <li><strong>Napl√°novat topen√≠:</strong> Vytvo≈ô√≠ optim√°ln√≠ pl√°n oh≈ôevu podle spotov√Ωch cen</li>
                            <li><strong>Aplikovat pl√°n:</strong> Spust√≠ napl√°novan√Ω oh≈ôev</li>
                            <li><strong>Zru≈°it pl√°n:</strong> Zru≈°√≠ aktu√°ln√≠ pl√°n topen√≠</li>
                        </ul>
                        V≈°echny akce jsou chr√°nƒõny ServiceShield syst√©mem.
                    </span>
                </span>
            </h3>
            <button class="btn-minimize" onclick="event.stopPropagation(); toggleBoilerControlPanel()">
                <span id="boiler-panel-toggle-icon">+</span>
            </button>
        </div>

        <div class="panel-content">
            <!-- Boiler Actions -->
            <div class="control-section">
                <h4>Akce</h4>
                <div class="button-group">
                    <button onclick="planBoilerHeating()" id="btn-plan-boiler"
                        title="Vytvo≈ôit optim√°ln√≠ pl√°n oh≈ôevu podle spotov√Ωch cen a po≈æadavk≈Ø">
                        üìÖ Napl√°novat topen√≠
                    </button>
                    <button onclick="applyBoilerPlan()" id="btn-apply-boiler"
                        title="Spustit napl√°novan√Ω oh≈ôev (pokud existuje platn√Ω pl√°n)">
                        ‚úÖ Aplikovat pl√°n
                    </button>
                    <button onclick="cancelBoilerPlan()" id="btn-cancel-boiler"
                        title="Zru≈°it aktu√°ln√≠ pl√°n topen√≠">
                        ‚ùå Zru≈°it pl√°n
                    </button>
                </div>
            </div>

            <!-- Boiler Status Info -->
            <div class="control-section">
                <h4>Stav bojleru</h4>
                <div class="boiler-status-grid">
                    <div class="status-card">
                        <div class="status-label">SOC</div>
                        <div class="status-value entity-value" id="boiler-soc-value"
                            data-entity="boiler_soc"
                            data-tooltip="State of Charge - √∫rove≈à nabit√≠ (0-100%)"
                            onclick="openEntityDialog(getSensorId('boiler_soc'))">
                            -- %
                        </div>
                    </div>
                    <div class="status-card">
                        <div class="status-label">Teplota horn√≠</div>
                        <div class="status-value entity-value" id="boiler-temp-top-value"
                            data-entity="boiler_temperature_top"
                            data-tooltip="Teplota v horn√≠ z√≥nƒõ bojleru"
                            onclick="openEntityDialog(getSensorId('boiler_temperature_top'))">
                            -- ¬∞C
                        </div>
                    </div>
                    <div class="status-card">
                        <div class="status-label">Energie pot≈ôebn√°</div>
                        <div class="status-value entity-value" id="boiler-energy-required-value"
                            data-entity="boiler_energy_required"
                            data-tooltip="Energie pot≈ôebn√° k dosa≈æen√≠ c√≠lov√© teploty"
                            onclick="openEntityDialog(getSensorId('boiler_energy_required'))">
                            -- kWh
                        </div>
                    </div>
                    <div class="status-card">
                        <div class="status-label">N√°klady pl√°nu</div>
                        <div class="status-value entity-value" id="boiler-plan-cost-value"
                            data-entity="boiler_plan_cost"
                            data-tooltip="Celkov√© n√°klady na napl√°novan√Ω oh≈ôev"
                            onclick="openEntityDialog(getSensorId('boiler_plan_cost'))">
                            -- Kƒç
                        </div>
                    </div>
                </div>
            </div>

            <!-- Boiler Plan Info -->
            <div class="control-section">
                <h4>Informace o pl√°nu</h4>
                <div class="boiler-plan-info" id="boiler-plan-info">
                    <div class="plan-info-row">
                        <span class="plan-info-label">Digest:</span>
                        <span class="plan-info-value" id="boiler-plan-digest">--</span>
                    </div>
                    <div class="plan-info-row">
                        <span class="plan-info-label">Slot≈Ø:</span>
                        <span class="plan-info-value" id="boiler-plan-slots">--</span>
                    </div>
                    <div class="plan-info-row">
                        <span class="plan-info-label">Topen√≠ aktivn√≠:</span>
                        <span class="plan-info-value" id="boiler-plan-active-slots">--</span>
                    </div>
                    <div class="plan-info-row">
                        <span class="plan-info-label">Od:</span>
                        <span class="plan-info-value" id="boiler-plan-start">--</span>
                    </div>
                    <div class="plan-info-row">
                        <span class="plan-info-label">Do:</span>
                        <span class="plan-info-value" id="boiler-plan-end">--</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Boiler Chart Section -->
    <div class="chart-section">
        <div class="chart-container">
            <canvas id="boiler-chart" style="max-height: 500px;"></canvas>
        </div>
    </div>

    <!-- Boiler Profile Section -->
    <div class="boiler-profile-section">
        <h3>‚öôÔ∏è Profil bojleru</h3>
        <div class="profile-grid">
            <div class="profile-card">
                <div class="profile-label">Objem</div>
                <div class="profile-value entity-value" id="boiler-profile-volume"
                    data-tooltip="Objem bojleru v litrech">
                    -- L
                </div>
            </div>
            <div class="profile-card">
                <div class="profile-label">V√Ωkon topen√≠</div>
                <div class="profile-value entity-value" id="boiler-profile-heater-power"
                    data-tooltip="Jmenovit√Ω v√Ωkon topn√©ho tƒõlesa">
                    -- W
                </div>
            </div>
            <div class="profile-card">
                <div class="profile-label">C√≠lov√° teplota</div>
                <div class="profile-value entity-value" id="boiler-profile-target-temp"
                    data-tooltip="C√≠lov√° teplota pro pl√°nov√°n√≠">
                    -- ¬∞C
                </div>
            </div>
            <div class="profile-card">
                <div class="profile-label">Deadline</div>
                <div class="profile-value entity-value" id="boiler-profile-deadline"
                    data-tooltip="ƒåas do kter√©ho mus√≠ b√Ωt bojler nah≈ô√°t√Ω">
                    --:--
                </div>
            </div>
            <div class="profile-card">
                <div class="profile-label">Stratifikace</div>
                <div class="profile-value entity-value" id="boiler-profile-stratification"
                    data-tooltip="Re≈æim modelov√°n√≠ stratifikace (simple_avg / two_zone)">
                    --
                </div>
            </div>
            <div class="profile-card">
                <div class="profile-label">Koeficient K</div>
                <div class="profile-value entity-value" id="boiler-profile-k-constant"
                    data-tooltip="Koeficient tepeln√© kapacity (kWh/K)">
                    --
                </div>
            </div>
        </div>
    </div>
</div>
