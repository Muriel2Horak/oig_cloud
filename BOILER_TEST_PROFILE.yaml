# ğŸ§ª GenerovÃ¡nÃ­ testovacÃ­ho profilu pro bojler z historickÃ½ch dat
#
# Tento skript naÄte historickÃ¡ data ze senzoru "sensor.potrebna_energie_pro_ohrev_tuv_do_68_degc"
# a vytvoÅ™Ã­ z nich usage profil (kdy se odebÃ­rÃ¡ teplÃ¡ voda).
#
# PouÅ¾itÃ­ v Developer Tools -> Services:

service: oig_cloud.generate_boiler_test_profile
data:
  energy_sensor: sensor.potrebna_energie_pro_ohrev_tuv_do_68_degc
  days: 30 # Analyzovat poslednÃ­ch 30 dnÃ­
  drop_threshold_kwh: 0.5 # MinimÃ¡lnÃ­ pokles energie povaÅ¾ovanÃ½ za odbÄ›r vody (kWh)

---
# Po vygenerovÃ¡nÃ­ profilu mÅ¯Å¾eÅ¡ zkontrolovat vÃ½sledky:

# 1. PodÃ­vej se do atributÅ¯ senzoru:
# Developer Tools -> States -> sensor.oig_bojler_pozadovana_energie
# MÄ›l by tam bÃ½t:
#   - hourly_avg_kwh: {0: 0.0, 7: 1.5, 12: 0.8, ...}
#   - predicted_usage_today: X.XX
#   - peak_hours: [7, 12, 19]
#   - total_events: XX
#   - heatmap_data: [[...], [...], ...]

# 2. Zkontroluj logy:
# ğŸ§ª Generating test profile from sensor.potrebna_energie_pro_ohrev_tuv_do_68_degc
# Found XXX state changes
# ğŸ’§ Usage detected: 2025-10-26 07:15 - 2.5 kWh
# âœ… Detected XX usage events
# ğŸ“Š Profile generated: XX events, XX hours with usage, peaks at [7, 12, 19]

# 3. Refresh dashboard:
# OtevÅ™i tab "ğŸ”¥ Bojler & Auto" a mÄ›l bys vidÄ›t:
#   - Profil spotÅ™eby (tÃ½den) - histogram
#   - Mapa spotÅ™eby (7 dnÃ­) - heatmap
#   - Predikovanou spotÅ™ebu dnes
#   - Å piÄkovÃ© hodiny

# 4. AutomatickÃ© plÃ¡novÃ¡nÃ­:
# Po vygenerovÃ¡nÃ­ profilu coordinator automaticky vytvoÅ™Ã­ plÃ¡n ohÅ™evu
# vyuÅ¾Ã­vajÃ­cÃ­ tento profil + aktuÃ¡lnÃ­ spotovÃ© ceny
